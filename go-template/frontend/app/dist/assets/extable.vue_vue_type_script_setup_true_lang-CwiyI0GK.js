var Ce=Object.defineProperty;var _e=(e,u,a)=>u in e?Ce(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a;var W=(e,u,a)=>(_e(e,typeof u!="symbol"?u+"":u,a),a);import{r as P,aI as Be,a7 as me,a8 as G,aJ as Se,a9 as ye,aK as pe,aL as Le,ab as Ae,aM as Ie,ac as he,ad as be,aN as $e,ae as xe,aw as Re,ah as Fe,aO as Te,aP as Pe,aQ as Ne,ay as Me,aR as oe,aS as ze,ax as T,aT as H,_ as M,al as ke,b as i,ao as N,s as q,aU as ue,aE as ie,aV as De,aG as qe,d as Oe,aW as Ee,w as je,az as Ue,G as Je,a as We,o as h,c as A,f as b,p as f,a4 as de,aq as O,ar as K,h as ee,A as Q,v as Ge,z as ae,e as _,F as te,j as le,J as He,K as Ke,x as E,a2 as Qe,at as Xe,I as ce,y as ve,$ as ne,av as fe,as as Ze}from"./index-DykNzqLW.js";import{V as ge}from"./VCard-BMvFbdY3.js";import{V as Ye}from"./VDialog-DTHIqMBw.js";import{V as X}from"./VCardText-BJnF-3QZ.js";import{d as ea}from"./VList-Ct3LS8TA.js";import{V as aa}from"./VSelect-C5XjW67S.js";import{V as ta}from"./VOverlay-BHaGYlG-.js";import{V as la}from"./VForm-DUT__qK3.js";var re=(e=>(e[e.NORMAL=1]="NORMAL",e[e.JSONB=10]="JSONB",e[e.ASSOCIATION=20]="ASSOCIATION",e))(re||{});class Ba{constructor(u,a,n){W(this,"query");W(this,"columns");W(this,"columnTypes");this.query=u??[],this.columns=a??[],this.columnTypes=n??[]}append(u,a,n){for(let r=0;r<this.columns.length;r++)if(this.columns[r]===a){this.query[r]=u,this.columns[r]=a,this.columnTypes[r]=n??10,u||(this.query.splice(r,1),this.columns.splice(r,1),this.columnTypes.splice(r,1));return}u&&(this.query.push(u),this.columns.push(a),this.columnTypes.push(n??10))}}function na(){const e=P([]);Be(()=>e.value=[]);function u(a,n){e.value[n]=a}return{refs:e,updateRef:u}}const sa=me({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:G,default:"$first"},prevIcon:{type:G,default:"$prev"},nextIcon:{type:G,default:"$next"},lastIcon:{type:G,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Se(),...ye(),...pe(),...Le(),...Ae(),...Ie(),...he({tag:"nav"}),...be(),...$e({variant:"text"})},"VPagination"),ia=xe()({name:"VPagination",props:sa(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,u){let{slots:a,emit:n}=u;const r=Re(e,"modelValue"),{t:B,n:p}=Fe(),{isRtl:m}=Te(),{themeClasses:I}=Pe(e),{width:$}=Ne(),R=Me(-1);oe(void 0,{scoped:!0});const{resizeRef:j}=ze(s=>{if(!s.length)return;const{target:d,contentRect:v}=s[0],y=d.querySelector(".v-pagination__list > *");if(!y)return;const C=v.width,t=y.offsetWidth+parseFloat(getComputedStyle(y).marginRight)*2;R.value=D(C,t)}),g=T(()=>parseInt(e.length,10)),l=T(()=>parseInt(e.start,10)),k=T(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):R.value>=0?R.value:D($.value,58));function D(s,d){const v=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((s-d*v)/d).toFixed(2)))}const Z=T(()=>{if(g.value<=0||isNaN(g.value)||g.value>Number.MAX_SAFE_INTEGER)return[];if(k.value<=0)return[];if(k.value===1)return[r.value];if(g.value<=k.value)return H(g.value,l.value);const s=k.value%2===0,d=s?k.value/2:Math.floor(k.value/2),v=s?d:d+1,y=g.value-d;if(v-r.value>=0)return[...H(Math.max(1,k.value-1),l.value),e.ellipsis,g.value];if(r.value-y>=(s?1:0)){const C=k.value-1,t=g.value-C+l.value;return[l.value,e.ellipsis,...H(C,t)]}else{const C=Math.max(1,k.value-3),t=C===1?r.value:r.value-Math.ceil(C/2)+l.value;return[l.value,e.ellipsis,...H(C,t),e.ellipsis,g.value]}});function V(s,d,v){s.preventDefault(),r.value=d,v&&n(v,d)}const{refs:z,updateRef:S}=na();oe({VPaginationBtn:{color:M(e,"color"),border:M(e,"border"),density:M(e,"density"),size:M(e,"size"),variant:M(e,"variant"),rounded:M(e,"rounded"),elevation:M(e,"elevation")}});const U=T(()=>Z.value.map((s,d)=>{const v=y=>S(y,d);if(typeof s=="string")return{isActive:!1,key:`ellipsis-${d}`,page:s,props:{ref:v,ellipsis:!0,icon:!0,disabled:!0}};{const y=s===r.value;return{isActive:y,key:s,page:p(s),props:{ref:v,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:y?e.activeColor:e.color,"aria-current":y,"aria-label":B(y?e.currentPageAriaLabel:e.pageAriaLabel,s),onClick:C=>V(C,s)}}}})),L=T(()=>{const s=!!e.disabled||r.value<=l.value,d=!!e.disabled||r.value>=l.value+g.value-1;return{first:e.showFirstLastPage?{icon:m.value?e.lastIcon:e.firstIcon,onClick:v=>V(v,l.value,"first"),disabled:s,"aria-label":B(e.firstAriaLabel),"aria-disabled":s}:void 0,prev:{icon:m.value?e.nextIcon:e.prevIcon,onClick:v=>V(v,r.value-1,"prev"),disabled:s,"aria-label":B(e.previousAriaLabel),"aria-disabled":s},next:{icon:m.value?e.prevIcon:e.nextIcon,onClick:v=>V(v,r.value+1,"next"),disabled:d,"aria-label":B(e.nextAriaLabel),"aria-disabled":d},last:e.showFirstLastPage?{icon:m.value?e.firstIcon:e.lastIcon,onClick:v=>V(v,l.value+g.value-1,"last"),disabled:d,"aria-label":B(e.lastAriaLabel),"aria-disabled":d}:void 0}});function w(){var d;const s=r.value-l.value;(d=z.value[s])==null||d.$el.focus()}function Y(s){s.key===ue.left&&!e.disabled&&r.value>+e.start?(r.value=r.value-1,ie(w)):s.key===ue.right&&!e.disabled&&r.value<l.value+g.value-1&&(r.value=r.value+1,ie(w))}return ke(()=>i(e.tag,{ref:j,class:["v-pagination",I.value,e.class],style:e.style,role:"navigation","aria-label":B(e.ariaLabel),onKeydown:Y,"data-test":"v-pagination-root"},{default:()=>[i("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&i("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(L.value.first):i(N,q({_as:"VPaginationBtn"},L.value.first),null)]),i("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(L.value.prev):i(N,q({_as:"VPaginationBtn"},L.value.prev),null)]),U.value.map((s,d)=>i("li",{key:s.key,class:["v-pagination__item",{"v-pagination__item--is-active":s.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(s):i(N,q({_as:"VPaginationBtn"},s.props),{default:()=>[s.page]})])),i("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(L.value.next):i(N,q({_as:"VPaginationBtn"},L.value.next),null)]),e.showFirstLastPage&&i("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(L.value.last):i(N,q({_as:"VPaginationBtn"},L.value.last),null)])])]})),{}}}),ra=me({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ye(),...pe(),...he(),...be()},"VTable"),oa=xe()({name:"VTable",props:ra(),setup(e,u){let{slots:a,emit:n}=u;const{themeClasses:r}=Pe(e),{densityClasses:B}=De(e);return ke(()=>i(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},r.value,B.value,e.class],style:e.style},{default:()=>{var p,m,I;return[(p=a.top)==null?void 0:p.call(a),a.default?i("div",{class:"v-table__wrapper",style:{height:qe(e.height)}},[i("table",null,[a.default()])]):(m=a.wrapper)==null?void 0:m.call(a),(I=a.bottom)==null?void 0:I.call(a)]}})),{}}});function se(...e){const u="/";return e=e.map((a,n)=>(a=String(a),n&&(a=a.replace(new RegExp(`^${u}`),"")),n!==e.length-1&&(a=a.replace(new RegExp(`${u}$`),"")),a)),e.join(u)}const ua=["onClick"],da={style:{cursor:"pointer"},class:"text-center"},ca={key:0},va={key:1},fa={key:3},ga={colspan:"7",class:"text-center"},ma={class:"d-flex align-center"},ya={class:"me-3",style:{width:"80px"}},pa={class:"text-sm text-disabled"},Sa=Oe({__name:"extable",props:{columns:{type:Array,required:!0},apiUrl:{type:String,required:!0},createButton:{type:Boolean,required:!0},actionBar:{type:Boolean},form:{type:Object,required:!0},resetForm:{required:!1,type:Function},tableActions:{type:Boolean,default:!0},emptyTableText:{type:String,default:"....."},indexColumn:{type:Boolean,default:!0},actionsColumn:{type:Boolean,default:!0},defaultSortColumn:{type:String,default:"id"},defaultSortColumnType:{type:Number,default:re.NORMAL},defaultSortOrder:{type:String,default:"desc"},query:{type:Object,default:()=>({query:[],columns:[],columnTypes:[]})}},emits:["update:form"],setup(e,{expose:u,emit:a}){const n=e,r=a,B=Ee(),p=P(!1),m=P(!1),I=P(n.query);je(()=>n.query,t=>{I.value=t,w()},{deep:!0});const $=P([]),R=P(n.defaultSortColumn),j=P(n.defaultSortColumnType),g=P(n.defaultSortOrder),l=P({currentPage:1,rowPerPage:10,totalPage:1,totalRows:0}),k=T(()=>{if(!$.value.length)return"";const t=$.value.length?(l.value.currentPage-1)*l.value.rowPerPage+1:0,o=$.value.length+(l.value.currentPage-1)*l.value.rowPerPage;return`${l.value.totalRows} satırdan ${t} - ${o} arası gösteriliyor`});Ue(()=>{l.value.currentPage>l.value.totalPage&&(l.value.currentPage=l.value.totalPage)});const D=T(()=>{if(!n.columns)return[];const t=[...n.columns];return n.indexColumn&&t.unshift({key:"i",name:"#",max_width:"10px"}),n.actionsColumn&&t.push({key:"actions",name:"İŞLEMLER"}),t}),Z=(t,o,x)=>{t&&(g.value==="asc"?g.value="desc":g.value="asc",R.value!==o&&(g.value="asc"),R.value=o,j.value=x??re.NORMAL,w())},V=P(),z=P(!1),S=P(!1),U=()=>{var t,o;S.value=!1,(t=V.value)==null||t.reset(),(o=n.resetForm)==null||o.call(n)},L=()=>{S.value=!0},w=async()=>{const t={...I.value};t.sortColumns=[R.value],t.sortOrders=[g.value],t.sortColumnTypes=[j.value],t.page=l.value.currentPage,t.perPage=l.value.rowPerPage,p.value=!0;const[o,x]=await O.get(n.apiUrl,t);if(p.value=!1,o)return K(o);$.value=x.data||[],l.value.totalRows=x.data_count,l.value.totalPage=Math.ceil(x.data_count/l.value.rowPerPage)},Y=t=>{t*l.value.currentPage>l.value.totalRows&&(l.value.currentPage=Math.ceil(l.value.totalRows/t)),l.value.rowPerPage=t,w()};Je(()=>{w()});const s=async()=>{const{valid:t}=await V.value.validate();if(!t)return;m.value=!0;let o;if(z.value?[o]=await O.post(n.apiUrl,n.form):[o]=await O.put(se(n.apiUrl,n.form.id),n.form),m.value=!1,o)return K(o);S.value=!1,w(),fe("İşlem Başarılı")},d=()=>{z.value=!0,S.value=!0,ie(()=>{var t,o;(t=V.value)==null||t.reset(),(o=n.resetForm)==null||o.call(n)})},v=async t=>{z.value=!1,m.value=!0;const[o,x]=await O.get(se(n.apiUrl,t));if(m.value=!1,o)return K(o);r("update:form",x.data),S.value=!0},y=async t=>{if(!(await Ze("İşlemi Onaylıyor musunuz?","Evet","Hayır")).isConfirmed)return;p.value=!0;const[x]=await O.delete(se(n.apiUrl,t));if(p.value=!1,x)return K(x);w(),fe("İşlem Başarılı")};return u({refresh:async t=>{t&&(I.value={...t}),await w()}}),(t,o)=>{const x=We("DialogCloseBtn");return h(),A("div",null,[i(ge,{flat:""},{default:b(()=>[e.createButton||e.actionBar?(h(),ee(X,{key:0,class:"d-flex justify-end"},{default:b(()=>[Q(t.$slots,"actionBar",{actionloading:f(p)}),e.createButton?(h(),ee(N,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:d},{default:b(()=>[Ge(" Ekle ")]),_:1})):ae("",!0)]),_:3})):ae("",!0),i(X,null,{default:b(()=>[i(oa,{class:"text-no-wrap"},{default:b(()=>[_("thead",null,[_("tr",null,[(h(!0),A(te,null,le(f(D),(c,J)=>(h(),A("th",{key:J,scope:"col",style:ce({"max-width":c.max_width}),onClick:F=>Z(c.sortable,c.sortField?c.sortField:c.key,c.sortFieldType)},[_("div",{class:ve(["d-flex align-center",{"justify-end":c.key==="actions"}])},[_("span",da,E(c.name),1),f(R)===c.key?(h(),ee(ne,{key:0,icon:f(g)==="asc"?"material-symbols:keyboard-arrow-up-rounded":"material-symbols:keyboard-arrow-down-rounded"},null,8,["icon"])):ae("",!0)],2)],12,ua))),128))])]),_("tbody",null,[(h(!0),A(te,null,le(f($),(c,J)=>(h(),A("tr",{key:J,style:{height:"3.75rem"}},[(h(!0),A(te,null,le(f(D),(F,Ve)=>(h(),A("td",{key:Ve,class:ve({"text-end":F.key==="actions"}),style:ce({"max-width":F.max_width})},[F.key==="i"?(h(),A("span",ca,E(J+1),1)):F.key==="actions"&&e.tableActions?(h(),A("span",va,[Q(t.$slots,"actions",{row:c}),i(N,{icon:"",size:"x-small",color:"default",variant:"text",onClick:we=>v(c.id)},{default:b(()=>[i(ne,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),i(N,{icon:"",size:"x-small",color:"default",variant:"text",onClick:we=>y(c.id)},{default:b(()=>[i(ne,{size:"22",color:"error",icon:"tabler-trash"})]),_:2},1032,["onClick"])])):f(B)[F.key]?Q(t.$slots,F.key,{key:2,row:c}):(h(),A("span",fa,E(c[F.key]),1))],6))),128))]))),128))]),He(_("tfoot",null,[_("tr",null,[_("td",ga,E(e.emptyTableText),1)])],512),[[Ke,!f($).length]])]),_:3})]),_:3}),i(ea),i(X,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:b(()=>[_("div",ma,[_("div",ya,[i(aa,{modelValue:f(l).rowPerPage,"onUpdate:modelValue":[o[0]||(o[0]=c=>f(l).rowPerPage=c),Y],density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),_("span",pa,E(f(k)),1)]),i(ia,{modelValue:f(l).currentPage,"onUpdate:modelValue":[o[1]||(o[1]=c=>f(l).currentPage=c),w],size:"small","total-visible":5,length:f(l).totalPage},null,8,["modelValue","length"])]),_:1}),i(ta,{modelValue:f(p),"onUpdate:modelValue":o[2]||(o[2]=c=>de(p)?p.value=c:null),class:"align-center justify-center",contained:"",persistent:""},{default:b(()=>[i(Qe,{size:50,color:"primary",indeterminate:""})]),_:1},8,["modelValue"])]),_:3}),i(Ye,{modelValue:f(S),"onUpdate:modelValue":o[3]||(o[3]=c=>de(S)?S.value=c:null),width:t.$vuetify.display.smAndDown?"auto":700,persistent:""},{default:b(()=>[i(x,{onClick:U}),i(ge,{loading:f(m),class:"pa-sm-8 pa-5"},{default:b(()=>[i(X,null,{default:b(()=>[i(f(la),{ref_key:"formRef",ref:V,onSubmit:Xe(s,["prevent"])},{default:b(()=>[Q(t.$slots,"modalBody",{formref:f(V),closemodal:U,openmodal:L,formloading:f(m),iscreateform:f(z)})]),_:3},512)]),_:3})]),_:3},8,["loading"])]),_:3},8,["modelValue","width"])])}}});export{Ba as A,Sa as _};
